#+LATEX_HEADER: \newenvironment{lequation}{\begin{equation}\Large}{\end{equation}}
#+OPTIONS: ^:nil
#+ATTR_LATEX: :width 5cm :options angle=90
#+TITLE: Shell 脚本入门
#+AUTHOR: 杨 睿
#+EMAIL: yangruipis@163.com
#+KEYWORDS: 
#+OPTIONS: H:4 toc:t
#+OPTIONS: tex:t
#+SETUPFILE: https://gitee.com/yangruigit/my_blogs/raw/master/lib/theme-readtheorg.setup
#+html: <div align="right">
#+html: <a href="javascript:history.back()">返回</a>
#+html: </div>


* 关于 shell

- shell 不是一堆 bash 命令的集合
- shell 是一个脚本语言，类似 python， 充当浇水

* 如何解决 90% 的问题

参考：[[https://zhuanlan.zhihu.com/p/264346586][一篇教会你写90%的shell脚本]]


* 常用函数

** 日志

#+BEGIN_SRC shell
    LOG_INFO() {
        set +x
        local msg=$*
        printf '[\033[1;32mINFO \033[0m]'
        printf '[\033[0;34m%-s\033[0m]' "$(date +'%Y-%m-%d %H:%M:%S')"
        printf '[\033[0;32m%-s:%d\033[0m]' "$0" "$LINENO"
        printf ' %-s\n' "${msg}"
        [[ ${DEBUG_MODE} -gt 0 ]] && set -x || set +x
    }


    LOG_WARNING() {
        set +x
        local msg=$*
        printf '[\033[1;33mWARN \033[0m]'
        printf '[\033[0;34m%-s\033[0m]' "$(date +'%Y-%m-%d %H:%M:%S')"
        printf '[\033[0;33m%-s:%d\033[0m]' "$0" "$LINENO"
        printf ' %-s\n' "${msg}"
        [[ ${DEBUG_MODE} -gt 0 ]] && set -x || set +x
    }


    LOG_ERROR() {
        set +x
        local msg=$*
        printf '[\033[1;31mERROR\033[0m]'
        printf '[\033[0;34m%-s\033[0m]' "$(date +'%Y-%m-%d %H:%M:%S')"
        printf '[\033[0;31m%-s:%d\033[0m]' "$0" "$LINENO"
        printf ' %-s\n' "${msg}"
        [[ ${DEBUG_MODE} -gt 0 ]] && set -x || set +x
    }

  LOG_INFO "this is an info"
  LOG_WARNING "this is a warning"
  LOG_ERROR "this is an error"
#+END_SRC


效果：

[[../../../assets/img/02_tech_shell_log_image.jpg]]

